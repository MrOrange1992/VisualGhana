<agm-map
  id="ghanaMap"
  [styles]="customMapStyles"
  [zoom]="zoom"
  [fitBounds]="latlngBounds"
  [disableDefaultUI]="true"
  [mapDraggable]="true"
  [zoomControl]="false"
  [scaleControl]="false"
  [streetViewControl]="false"
  [rotateControl]="false"
  [fullscreenControl]="false"
  (mapClick)="clickedMap($event)"
  (zoomChange)="zoomChange($event)"
>

  <!---------------------------- LINES ----------------------------->

  <!-- POWERLINES -->
  <agm-data-layer
    (layerClick)="clickedLine($event)"
    [style]="stylesService.loadPowerLineStyles"
    [geoJson]=powerLines
  ></agm-data-layer>

  <!-- ROADS -->
  <agm-data-layer
    (layerClick)="clickedLine($event)"
    [style]="stylesService.loadRoadStyles"
    [geoJson]="roadData"
  ></agm-data-layer>

  <!-- AULA TERRA -->
  <agm-data-layer
    (layerClick)="clickedLine($event)"
    [style]="stylesService.loadAulaTerraRoadStyles"
    [geoJson]="aulaTerraRoad"

  ></agm-data-layer>

  <!---------------------------- POLYGONS ----------------------------->


  <!-- OVERLAY (rest of africa) -->
  <agm-data-layer
    [style]="stylesService.loadOverLayStyles"
    [geoJson]=overlay
  ></agm-data-layer>

  <!-- POPULATION DENSITY -->
  <agm-data-layer
    [style]="stylesService.loadPopulationTileStyles"
    [geoJson]=populationTiles
  ></agm-data-layer>

  <!-- EDUCATION DISTRIBUTION -->
  <agm-data-layer
    [style]="stylesService.loadDistributionStyles"
    [geoJson]=districts
    (layerClick)="clickedDistricts($event)"
  ></agm-data-layer>

  <!---------------------------- POINTS ----------------------------->

  <!--Aula Terra markers-->
  <agm-marker *ngFor="let marker of aulaTerraMarkers"
    [latitude] = "marker.latitude"
    [longitude] = "marker.longitude"
    (markerClick)="loadMediaSource(marker.src, marker.type)"
    [iconUrl]="marker.iconUrl"
  ></agm-marker>


  <!-- INFO WINDOW on click event -->
  <agm-marker [latitude]="infoLatitude" [longitude]="infoLongitude" [visible]="false">
    <agm-info-window [disableAutoPan]="true" [isOpen]="infoVisible" #infoWindow>
      <div *ngIf="infoGeoJsonObject">
        <ul *ngFor="let property of objectKeys(infoGeoJsonObject)">
          <li>
            {{property}}: {{infoGeoJsonObject[property]}}
          </li>
        </ul>
      </div>
    </agm-info-window>
  </agm-marker>


  <!---------------------------- CIRCLES ----------------------------->
    <agm-circle *ngFor="let powerPlant of (powerPlants | filteryear : activeTimeLineYear)"
                [latitude]="powerPlant.latitude"
                [longitude]="powerPlant.longitude"
                [circleDraggable]="false"
                [editable]="false"
                [fillColor]="powerPlant.color"
                [fillOpacity]="0.8"
                [radius]="powerPlant.radius"
                (circleClick)="clickedObject(powerPlant)"
                (mouseOver)="mouseOverObject(powerPlant)"
                (mouseOut)="mouseOutObject(powerPlant)"
    ></agm-circle>


  <agm-circle *ngFor="let healthSite of filteredHealthSites"
              [latitude]="healthSite.latitude"
              [longitude]="healthSite.longitude"
              [circleDraggable]="false"
              [editable]="false"
              [fillColor]="healthSite.color"
              [fillOpacity]="0.8"
              [(radius)]="healthSite.radius"
              (circleClick)="clickedObject(healthSite)"

  ></agm-circle>

  <agm-circle *ngFor="let airport of airports"
              [latitude]="airport.latitude"
              [longitude]="airport.longitude"
              [circleDraggable]="false"
              [editable]="false"
              [fillColor]="airport.color"
              [fillOpacity]="0.8"
              [(radius)]="airport.radius"
              (circleClick)="clickedObject(airport)"
  ></agm-circle>

</agm-map>


<div class="infoPanel">

  <!--div class="infoPanelSection title" onClick="history.go(0)">VISUAL GHANA</div-->
  <div class="infoPanelSection title" (click)="resetMap()">
    VISUAL GHANA
  </div>

  <div class="infoPanelSection szenarios">
    <div class="szenarioButton infrastructureButton" (click)="loadInfrastructureConfig()">
        Infrastructure
    </div>
    <div class="szenarioButton technologyButton" (click)="loadTechnologyConfig()" >
        Technology
    </div>
    <div class="szenarioButton concepteButton" (click)="loadConceptConfig()">
        Forecast
    </div>
    <div class="szenarioButton aulaterraButton" (click)="loadAulaterraRoad()">
      <img src="../../assets/img/aulaterra.jpeg" width="100%" height="100%"  >
    </div>
  </div>

  <div class="infoPanelSection clickable">
    <button class="loadButton loadPower" (click)="loadPower()">
       Power
    </button>
    <button class="loadButton loadHealthSite" (click)="prepareHealthSites()">
       Health Sites
    </button>
    <button class="loadButton loadTransportation" (click)="loadTransportation()">
       Transportation
    </button>
    <button class="loadButton loadEducation" (click)="prepareEducation()">
       Education
    </button>
    <button class="loadButton loadPopulation" (click)="loadPopulationTiles()" (click)="loadPopOverYears()">
       Population Density
    </button>

  </div>

  <div class="infoPanelSection info">

    <div *ngIf="educationMode" class="infoPanelSection clickable">
      <button
        class="loadButton"
        (click)="loadEducationDistribution('primaryschool')"
        [ngStyle]="{'background-color': colors.educationColor}">
        Primary Schools
      </button>
      <button
        class="loadButton"
        (click)="loadEducationDistribution('highschool')"
        [ngStyle]="{'background-color': colors.educationColor}">
        High Schools
      </button>
      <button
        class="loadButton"
        (click)="loadEducationDistribution('university')"
        [ngStyle]="{'background-color': colors.educationColor}">
        Universities
      </button>
    </div>

    <div *ngIf="healthMode" class="infoPanelSection clickable">
      <button
      class="loadButton"
      (click)="loadHealthSiteType('Hospital')"
      [ngStyle]="{'background-color': colors.hospitalColor}">
      Hospitals
    </button>
      <button
        class="loadButton"
        (click)="loadHealthSiteType('Clinic')"
        [ngStyle]="{'background-color': colors.clinicColor}">
        Clinics
      </button>
      <button
        class="loadButton"
        (click)="loadHealthSiteType('Children Healthcare')"
        [ngStyle]="{'background-color': colors.maternityColor}">
        Children Healthcare
      </button>
      <button
        class="loadButton"
        (click)="loadHealthSiteType('Others')"
        [ngStyle]="{'background-color': '#000'}">
        CHPS
      </button>
    </div>

    <div *ngIf="mediaSource.src">
      <img *ngIf="mediaSource.type == 'image'" src={{mediaSource.src}} width="100%">
      <video *ngIf="mediaSource.type == 'video'" width="100%" controls Autoplay=autoplay src="{{mediaSource.src}}"></video>
    </div>

    <!--div *ngIf="infoGeoJsonObject">
      <p *ngIf="infoGeoJsonObject.name">Name: <strong>{{infoGeoJsonObject.name}}</strong></p>
      <p *ngIf="infoGeoJsonObject.capacity">Capacity: <strong>{{infoGeoJsonObject.capacity}} [MW]</strong></p>
      <p *ngIf="infoGeoJsonObject.type">Type: <strong>{{infoGeoJsonObject.type}}</strong></p>
    </div-->

    <div class="canvasBlock">
      <canvas class="chartCanvas" id="chartCanvas">{{chart}}</canvas>
    </div>

  </div>





</div>

<div *ngIf="foreCastMode" class="timeLineWindow">

  <!--div id="timeline"-->
  <div>

    <!--ul  *ngFor="let year of years">
      <!--li><a href="#1965" class="selected">1965</a></li>
      <li><a href="#{{year}}">{{year}}</a></li>


    </ul-->
    <ul *ngFor="let year of years">
      <!--li id="1965" class="selected">
        <h1>1965</h1>
      </li-->
      <li id="{{year}}">
        <h1 (click)="clickedYear(year)">{{year}}</h1>
      </li>
    </ul>

    <!--a href="#" id="next">+</a>
    <a href="#" id="prev">-</a-->
  </div>

</div>


